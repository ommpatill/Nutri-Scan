{"ast":null,"code":"const {\n  deficiency,\n  confidence,\n  image,\n  age\n} = state || {};\nuseEffect(() => {\n  if (!deficiency) {\n    navigate(\"/\"); // Redirect to home page if deficiency is missing\n    return;\n  }\n  const fetchAdvice = async () => {\n    try {\n      const payload = {\n        deficiency\n      };\n      if (age) payload.age = age;\n      const res = await axios.post(\"/api/gemini/recommend\", payload);\n      setAdvice(res.data.recommendation || \"No recommendation generated.\");\n    } catch (err) {\n      console.error(\"Failed to fetch recommendations\", err);\n      setAdvice(\"Could not fetch recommendations.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  fetchAdvice();\n}, [deficiency, age, navigate]);","map":{"version":3,"names":["deficiency","confidence","image","age","state","useEffect","navigate","fetchAdvice","payload","res","axios","post","setAdvice","data","recommendation","err","console","error","setLoading"],"sources":["D:/TYProj/NutriScan/client/src/pages/Recommendation.jsx"],"sourcesContent":["const { deficiency, confidence, image, age } = state || {};\r\n\r\nuseEffect(() => {\r\n  if (!deficiency) {\r\n    navigate(\"/\"); // Redirect to home page if deficiency is missing\r\n    return;\r\n  }\r\n\r\n  const fetchAdvice = async () => {\r\n    try {\r\n      const payload = { deficiency };\r\n      if (age) payload.age = age;\r\n\r\n      const res = await axios.post(\"/api/gemini/recommend\", payload);\r\n      setAdvice(res.data.recommendation || \"No recommendation generated.\");\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch recommendations\", err);\r\n      setAdvice(\"Could not fetch recommendations.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  fetchAdvice();\r\n}, [deficiency, age, navigate]);\r\n"],"mappings":"AAAA,MAAM;EAAEA,UAAU;EAAEC,UAAU;EAAEC,KAAK;EAAEC;AAAI,CAAC,GAAGC,KAAK,IAAI,CAAC,CAAC;AAE1DC,SAAS,CAAC,MAAM;EACd,IAAI,CAACL,UAAU,EAAE;IACfM,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;IACf;EACF;EAEA,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI;MACF,MAAMC,OAAO,GAAG;QAAER;MAAW,CAAC;MAC9B,IAAIG,GAAG,EAAEK,OAAO,CAACL,GAAG,GAAGA,GAAG;MAE1B,MAAMM,GAAG,GAAG,MAAMC,KAAK,CAACC,IAAI,CAAC,uBAAuB,EAAEH,OAAO,CAAC;MAC9DI,SAAS,CAACH,GAAG,CAACI,IAAI,CAACC,cAAc,IAAI,8BAA8B,CAAC;IACtE,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAEF,GAAG,CAAC;MACrDH,SAAS,CAAC,kCAAkC,CAAC;IAC/C,CAAC,SAAS;MACRM,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAEDX,WAAW,CAAC,CAAC;AACf,CAAC,EAAE,CAACP,UAAU,EAAEG,GAAG,EAAEG,QAAQ,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}